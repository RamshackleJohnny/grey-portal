{% extends "layouts/base.html" %}

{% block title %}TSCT Portal{% endblock %}

{% block content %}
{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for message in messages %}
      <p class="flashes">{{ message }}</p>
    {% endfor %}
  {% endif %}
{% endwith %}
  <section class="flexbox">
    {% if g.user['role']=='teacher' %}
    <div class="bordered">
    <form method="POST">
      Course Name: <input type="text" name="coursename" required><br />
      Course Code: <input type="text" name="coursenumber" required><br />
      Course Description: <textarea name="coursedesc" required cols="35" maxlength="100"></textarea><br />
      <label for="submit">
          <input type="submit" name="submit">
      </label>
    </form>
  </div>
  {% endif %}
  <div class="bordered" style="width: 600px; max-height:400px; overflow-y:scroll;">
    <h2>Course Directory</h2>
      {% for class in all_courses %}
        <h3>{{ class['course_id'] }}</h3>
        Teacher: {% for people in all_teachers  %}
                  {% if class[2] == people[2] %}
                      {{ people [1] }}, {{ people[0] }}
                  {% endif %}
                {% endfor %}<br />
        <i>{{ class[1] }}</i>
        {% if class[2] == g.user[0] %}<br />
            <a class="fa fa-trash" href="{{ url_for('delete_course', id=class[3]) }}"></a> <a class="fa fa-pencil-square-o" href="{{ url_for('update_course', id=class[3]) }}"></a>
          {% endif %}
        <hr />
      {% endfor %}
  </div>
  </section>
{% endblock %}
